<html>

<head>
    <script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>
    <script>
    var totalVal = 0;
    var totalInvested = 0;

    var coins = [{
        id: "btc",
        x: "BTC",
        num: 1,
        invested: 100
    }, {
        id: "bch",
        x: "BCH",
        num: 1,
        invested: 100
    }, {
        id: "btg",
        x: "BTG",
        num: 1,
        invested: 100
    }, {
        id: "etc",
        x: "ETC",
        num: 1,
        invested: 100
    }, {
        id: "eth",
        x: "ETH",
        num: 1,
        invested: 100
    }, {
        id: "ltc",
        x: "LTC",
        num: 117.03,
        invested: 350
    }, {
        id: "maid",
        x: "MAID",
        num: 1,
        invested: 100
    }, {
        id: "xrp",
        x: "XRP",
        num: 1,
        invested: 100
    }, {
        id: "fct",
        x: "FCT",
        num: 1,
        invested: 100
    }];

    function loadTicker(i) {
        $.ajax({
            url: "https://min-api.cryptocompare.com/data/histoday?aggregate=1&e=CCCAGG&fsym=" + coins[i].x + "&limit=1&tsym=EUR",
            type: "GET",
            dataType: 'json',
            indexValue: i,
            success: function(resultData) {
                val=resultData.Data[resultData.Data.length-1].close;
                $("#" + coins[this.indexValue].id + "Price").text((val * 1.0).toFixed(2));
                $("#" + coins[this.indexValue].id + "Val").text((val * coins[this.indexValue].num * 1.0).toFixed(0));
                $("#" + coins[this.indexValue].id + "Invested").text((coins[this.indexValue].invested * 1.0).toFixed(0));
                $("#" + coins[this.indexValue].id + "Num").text((coins[this.indexValue].num * 1.0).toFixed(1));
                $("#" + coins[this.indexValue].id + "Multiplier").text((val / (coins[this.indexValue].invested / coins[this.indexValue].num) * 1.0).toFixed(1));
                totalVal += val * coins[this.indexValue].num;
                totalInvested += coins[this.indexValue].invested;
                $("#totalVal").text((totalVal * 1.0).toFixed(0));
                $("#totalInvested").text((totalInvested * 1.0).toFixed(0));
                $("#totalProfit").text(((totalVal - totalInvested) * 1.0).toFixed(0));
                $("#totalMultiplier").text(((totalVal / totalInvested) * 1.0).toFixed(1));
            },
            error: function(jqXHR, textStatus, errorThrown) {},
            timeout: 120000
        });

        $.ajax({
            url: "https://min-api.cryptocompare.com/data/histoday?aggregate=1&e=CCCAGG&fsym=" + coins[i].x + "&limit=1&tsym=USD",
            type: "GET",
            indexValue: i,
            success: function(resultData) {
                val=resultData.Data[resultData.Data.length-1].close;
                $("#" + coins[this.indexValue].id + "PriceUSD").text((val * 1.0).toFixed(2));
            },
            error: function(jqXHR, textStatus, errorThrown) {},
            timeout: 120000
        });
    }

    for (i in coins) {
        setTimeout("loadTicker(" + i + ")", i * 500);
    }
    </script>
</head>

<body>


    <table>
        <th>
            <td>usd</td>
            <td>eur</td>
            <td>val</td>
            <td>invested</td>
            <td>num</td>
            <td>multiplier</td>
        </th>
        <tr>
            <td>BTC</td>
            <td>$ <span id="btcPriceUSD"></span></td>
            <td>&euro; <span id="btcPrice"></span></td>
            <td>&euro; <span id="btcVal"></span></td>
            <td>&euro; <span id="btcInvested"></span></td>
            <td><span id="btcNum"></span></td>
            <td>x<span id="btcMultiplier"></span></td>
        </tr>
        <tr>
            <td>BCH</td>
            <td>$ <span id="bchPriceUSD"></span></td>
            <td>&euro; <span id="bchPrice"></span></td>
            <td>&euro; <span id="bchVal"></span></td>
            <td>&euro; <span id="bchInvested"></span></td>
            <td><span id="bchNum"></span></td>
            <td>x<span id="bchMultiplier"></span></td>
        </tr>
        <tr>
            <td>BTG</td>
            <td>$ <span id="btgPriceUSD"></span></td>
            <td>&euro; <span id="btgPrice"></span></td>
            <td>&euro; <span id="btgVal"></span></td>
            <td>&euro; <span id="btgInvested"></span></td>
            <td><span id="btgNum"></span></td>
            <td>x<span id="btgMultiplier"></span></td>
        </tr>
        <tr>
            <td>ETH</td>
            <td>$ <span id="ethPriceUSD"></span></td>
            <td>&euro; <span id="ethPrice"></span></td>
            <td>&euro; <span id="ethVal"></span></td>
            <td>&euro; <span id="ethInvested"></span></td>
            <td><span id="ethNum"></span></td>
            <td>x<span id="ethMultiplier"></span></td>
        </tr>
        <tr>
            <td>ETC</td>
            <td>$ <span id="etcPriceUSD"></span></td>
            <td>&euro; <span id="etcPrice"></span></td>
            <td>&euro; <span id="etcVal"></span></td>
            <td>&euro; <span id="etcInvested"></span></td>
            <td><span id="etcNum"></span></td>
            <td>x<span id="etcMultiplier"></span></td>
        </tr>
        <tr>
            <td>LTC</td>
            <td>$ <span id="ltcPriceUSD"></span></td>
            <td>&euro; <span id="ltcPrice"></span></td>
            <td>&euro; <span id="ltcVal"></span></td>
            <td>&euro; <span id="ltcInvested"></span></td>
            <td><span id="ltcNum"></span></td>
            <td>x<span id="ltcMultiplier"></span></td>
        </tr>
        <tr>
            <td>MAID</td>
            <td>$ <span id="maidPriceUSD"></span></td>
            <td>&euro; <span id="maidPrice"></span></td>
            <td>&euro; <span id="maidVal"></span></td>
            <td>&euro; <span id="maidInvested"></span></td>
            <td><span id="maidNum"></span></td>
            <td>x<span id="maidMultiplier"></span></td>
        </tr>
        <tr>
            <td>XRP</td>
            <td>$ <span id="xrpPriceUSD"></span></td>
            <td>&euro; <span id="xrpPrice"></span></td>
            <td>&euro; <span id="xrpVal"></span></td>
            <td>&euro; <span id="xrpInvested"></span></td>
            <td><span id="xrpNum"></span></td>
            <td>x<span id="xrpMultiplier"></span></td>
        </tr>
        <tr>
            <td>FCT</td>
            <td>$ <span id="fctPriceUSD"></span></td>
            <td>&euro; <span id="fctPrice"></span></td>
            <td>&euro; <span id="fctVal"></span></td>
            <td>&euro; <span id="fctInvested"></span></td>
            <td><span id="fctNum"></span></td>
            <td>x<span id="fctMultiplier"></span></td>
        </tr>
        <tr>
            <td>Total</td>
            <td></td>
            <td></td>
            <td>&euro; <span id="totalVal"></span></td>
            <td>&euro; <span id="totalInvested"></span></td>
            <td></td>
            <td>x<span id="totalMultiplier"></span></td>
        </tr>
        <tr>
            <td>Profit</td>
            <td></td>
            <td></td>
            <td>&euro; <span id="totalProfit"></span></td>
        </tr>
</body>

</html>
